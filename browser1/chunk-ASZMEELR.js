import{e as w}from"./chunk-FYW4W47M.js";import"./chunk-X6YHEMIY.js";import{e as S,f as T,p as I}from"./chunk-7ERO6PR6.js";import{$a as C,Ba as v,Ea as b,Oa as h,Qa as r,Ra as l,Va as f,W as s,Wa as m,X as g,Xa as a,Ya as x,Za as c,cb as k,ga as d,sa as _,xa as u}from"./chunk-LQJFUVYD.js";import{f as p}from"./chunk-ZY7WU73K.js";function L(o,t){if(o&1){let e=f();r(0,"div")(1,"h2"),c(2),l(),r(3,"button",2),m("click",function(){s(e);let n=a();return g(n.goToHome())}),c(4,"Home"),l(),r(5,"button",2),m("click",function(){s(e);let n=a();return g(n.logout())}),c(6,"Logout"),l()()}if(o&2){let e,i=a();_(2),C("Welcome, ",(e=i.user())==null?null:e.username,"")}}function M(o,t){if(o&1){let e=f();r(0,"div",3)(1,"div",4)(2,"h2",5),c(3,"Login"),l(),r(4,"form")(5,"button",6),m("click",function(){s(e);let n=a();return g(n.login())}),c(6,"Login with Azure"),l()()()()}}var y=class o{constructor(t,e){this.authService=t;this.router=e}user=d(null);ngOnInit(){return p(this,null,function*(){this.user()&&typeof window<"u"?localStorage.getItem("accessToken")&&localStorage.getItem("idToken")&&(this.router.navigate(["/app/home"]),console.log("user is logged in already----")):(yield this.authService.instance.initialize(),this.authService.instance.handleRedirectPromise().then(t=>{t!==null&&t.account&&(console.log("user data----",t),this.authService.instance.setActiveAccount(t.account),this.user.set(t.account),localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("idToken",t.idToken),this.router.navigate(["/app/home"]))}))})}login(){console.log("before login call------"),this.authService.loginRedirect(),console.log("after login call------")}logout(){console.log("logout method----"),this.authService.logoutRedirect(),console.log("logout logoutRedirect----"),this.user.set(null),console.log("logout user.set----"),localStorage.removeItem("accessToken"),localStorage.removeItem("idToken"),console.log("logout removeItem----"),this.router.navigate(["/"]),console.log("log out navigate")}goToHome(){this.router.navigate(["/app/home"])}static \u0275fac=function(e){return new(e||o)(u(w),u(I))};static \u0275cmp=v({type:o,selectors:[["app-login"]],decls:3,vars:2,consts:[["loginTemplate",""],[4,"ngIf","ngIfElse"],[3,"click"],[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","shadow-lg","p-4","login-card"],[1,"text-center","mb-4"],["type","submit",1,"btn","btn-primary","w-100",3,"click"]],template:function(e,i){if(e&1&&b(0,L,7,1,"div",1)(1,M,7,0,"ng-template",null,0,k),e&2){let n=x(2);h("ngIf",i.user())("ngIfElse",n)}},dependencies:[T,S],styles:["[_ngcontent-%COMP%]:root{--bg-color: #ffffff;--text-color: #000000;--card-bg: #f8f9fa;--input-bg: #ffffff;--btn-bg: #007bff;--btn-hover: #0056b3}.dark-mode[_ngcontent-%COMP%]{--bg-color: #121212;--text-color: #ffffff;--card-bg: #1e1e1e;--input-bg: #333;--btn-bg: #1e90ff;--btn-hover: #0056b3}body[_ngcontent-%COMP%]{background-color:var(--bg-color);color:var(--text-color);transition:background .3s,color .3s}.login-card[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:10px;width:350px;transition:background .3s,color .3s}"]})};export{y as LoginComponent};
